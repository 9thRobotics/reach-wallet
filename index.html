<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reach Token Portal</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://unpkg.com/@walletconnect/web3-provider@1.7.8/dist/umd/index.min.js"></script>
  <script src="https://unpkg.com/@coinbase/wallet-sdk@3.11.0/dist/umd/wallet-sdk.min.js"></script>
</head>
<body>
  <h1>üîó Reach Token Portal</h1>
  <div id="wallet-buttons">
    <button onclick="connectInjected('metamask')" aria-label="Connect MetaMask">
      <img src="https://cryptologos.cc/logos/metamask-fox-logo.png" alt="MetaMask" /> MetaMask
    </button>
    <button onclick="connectInjected('trustwallet')" aria-label="Connect Trust Wallet">
      <img src="https://trustwallet.com/assets/images/media/assets/TWT.png" alt="Trust Wallet" /> Trust Wallet
    </button>
    <button onclick="connectCoinbase()" aria-label="Connect Coinbase">
      <img src="https://cryptologos.cc/logos/coinbase-coinbase-logo.png" alt="Coinbase" /> Coinbase
    </button>
    <button onclick="connectWalletConnect()" aria-label="Connect WalletConnect">
      <img src="https://cryptologos.cc/logos/walletconnect-walletconnect-logo.png" alt="WalletConnect" /> WalletConnect
    </button>
  </div>
  <button onclick="disconnectWallet()" id="disconnectButton" style="display:none;">‚ùå Disconnect</button>
  <br />
  <input type="number" id="tokenAmount" placeholder="How many Reach tokens?" aria-label="Token Amount" />
  <div id="calc-output"></div>
  <button onclick="buyTokens()" id="buyButton" style="display:none;">ü™ô Buy Reach Tokens</button>
  <div id="status">Wallet not connected.</div>
  <div id="estimator"></div>
  <script src="app.js"></script>
</body>
</html>
body {
  background: #111;
  color: white;
  font-family: Arial, sans-serif;
  text-align: center;
  padding: 40px;
}

button {
  padding: 12px 20px;
  font-size: 16px;
  margin: 10px;
  background-color: #1c90f3;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

button:disabled {
  background-color: #555;
  cursor: not-allowed;
}

input {
  padding: 10px;
  font-size: 16px;
  margin-top: 10px;
  width: 200px;
  text-align: center;
}

img {
  height: 20px;
}

#status, #estimator, #calc-output {
  margin-top: 20px;
  font-size: 1em;
}
let provider, web3Provider, signer, selectedAccount;

const walletConnectProvider = new window.WalletConnectProvider.default({
  infuraId: process.env.INFURA_ID || "your-infura-id"
});

const coinbaseWalletProvider = new window.CoinbaseWalletSDK({
  appName: "ReachToken Portal",
  infuraId: process.env.INFURA_ID || "your-infura-id"
});

async function connectInjected(type) {
  if (typeof window.ethereum === "undefined") {
    showError("No wallet found. Install MetaMask or Trust Wallet.");
    return;
  }

  try {
    provider = window.ethereum;
    await provider.request({ method: "eth_requestAccounts" });
    web3Provider = new ethers.providers.Web3Provider(provider);
    signer = web3Provider.getSigner();
    selectedAccount = await signer.getAddress();
    updateUI("Connected", `‚úÖ Connected: ${selectedAccount}`);
  } catch (e) {
    console.error("Connection error:", e);
    updateUI("Failed", "‚ùå Failed to connect.");
  }
}

async function connectWalletConnect() {
  try {
    await walletConnectProvider.enable();
    web3Provider = new ethers.providers.Web3Provider(walletConnectProvider);
    signer = web3Provider.getSigner();
    selectedAccount = await signer.getAddress();
    updateUI("Connected", `‚úÖ Connected via WalletConnect: ${selectedAccount}`);
  } catch (err) {
    console.error("WalletConnect error:", err);
    showError("WalletConnect connection failed.");
  }
}

async function connectCoinbase() {
  try {
    const cbProvider = coinbaseWalletProvider.makeWeb3Provider(
      "https://mainnet.infura.io/v3/" + process.env.INFURA_ID,
      1
    );
    web3Provider = new ethers.providers.Web3Provider(cbProvider);
    signer = web3Provider.getSigner();
    selectedAccount = await signer.getAddress();
    updateUI("Connected", `‚úÖ Connected via Coinbase: ${selectedAccount}`);
  } catch (e) {
    console.error("Coinbase connect error:", e);
    showError("Coinbase connection failed.");
  }
}

function disconnectWallet() {
  provider = null;
  web3Provider = null;
  signer = null;
  selectedAccount = null;
  updateUI("Disconnected", "üîå Wallet disconnected.");
}

function showError(message) {
  alert(message);
  document.getElementById("status").innerText = message;
}

function updateUI(status, message) {
  document.getElementById("status").innerText = message;
  document.getElementById("buyButton").style.display =
    status === "Connected" ? "inline-block" : "none";
  document.getElementById("disconnectButton").style.display =
    status === "Connected" ? "inline-block" : "none";
}

// Add more logic for token purchase, calculations, etc.
